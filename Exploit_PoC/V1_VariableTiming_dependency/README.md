# Variant Timing Instruction dependent memory access
Variant timing instructions, such as floating point instructions, are considered to be vulnerable to timing attacks.  
Under a spectre attack, such timing difference is not measureable.
Because the timer can only be issued when the misprediction is handled.  

In this paper, we discloesed two vulnerabilities with variant timing instructions and they can leak secrets under spectre attack.  


## Fixed speculation window with variant execution timing
Given a fixed speculation window, executions that take longer time than the speculative window may not be completely executed before the resolve of misprediction.  
Therefore, any younger instructions (in-order fetched after variant timing instrucionts) that are dependent on them may also not be executed.

In the case of floating point operations, same sequence of floating point operations may have variant execution times which is dependent on a secret input.  
Younger instructions that has dependency on floating point instructions (such as memory accesses) may fall out of the speculative window and results in not being executed.

## Bypassing SLH
SLH hardens the memory access but does not harden registers.  
When a floating point value is already loaded to a register and it will not be hardened in the misprediction.  
In the mode of vSLH which hardens the loaded value, an attacker could infer the secret by checking the presence of memory in the cache.

However, in the mode of aSLH which hardens the address of memory access, the secret relevant memory access is not performed because the address of it is poisoned by aSLH.

# Fixing SLH
To fix it, we harden all operators of floating point operations.

## How to run it
Please refer to compile.bash.  
We also provide the c code version. You could compile it with GCC to see leakages.